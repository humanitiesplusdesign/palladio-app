angular.module("palladioTimelineComponent",["palladio","palladio.services"]).run(["componentService",function(t){var e=function(t,e){t.showControls=void 0===t.showControls||t.showControls,t.showAccordion=void 0===t.showAccordion||t.showAccordion,t.showSettings=void 0===t.showSettings||t.showSettings,t.timelineHeight=void 0===t.height?200:t.height,t.functions={};var n="<div data-palladio-timeline-filter-with-settings ";return n+="show-controls=showControls ",n+="show-accordion=showAccordion ",n+="show-settings=showSettings ",n+="timeline-height=timelineHeight ",n+="functions=functions ",n+="></div>"};t.register("timeline",e)}]).directive("palladioTimelineFilter",["dateService","palladioService",function(t,e){var n="filter-extent",o={scope:{localDimension:"=dimension",groupAccessor:"=",type:"@",uniqueDimension:"@countBy",xfilter:"=xfilter",title:"@",width:"@",height:"@",mode:"@","short":"=",extentOverride:"=",aggregationType:"@",aggregateKey:"@",setFilter:"=",getFilter:"="},link:function(o,a,i){function r(t){var a=c(T);G(a),I=t.select("svg").select("g");var i=I.select(".timeline-tooltip");I.empty()&&(I=t.append("svg").attr("height",W).attr("width",j).append("g").attr("transform","translate("+K+", "+O+")"),I.append("rect").attr("height",W-2*O).attr("width",j-2*K).attr("fill","rgba(0, 0, 0, 0)")),q=d3.behavior.zoom(),q.x(F),q.scaleExtent([1,1/0]),q.on("zoom",u),I.select("g.x-axis").empty()||I.select("g.x-axis").remove(),I.append("g").attr("class","axis x-axis").attr("transform","translate(0,"+V+")").call(S),w.on("brushstart",function(){d3.event.sourceEvent&&d3.event.sourceEvent.stopPropagation()}),w.on("brush",function(){Z=w.extent(),o.localDimension.filterFunction(l),e.update()}),w.on("brushend",function(){var t=w.extent();if(Z=t,w.empty())o.localDimension.filterAll(),o.$parent.$digest(),e.removeFilter(X),o.setFilter&&o.setFilter(w.extent());else{o.$parent.$digest();var n=t.map(function(t){return"from "+y(t[0])+" to "+y(t[1])}).join(" and ");tt.push(e.setFilter(X,o.title,n,f)),o.setFilter&&o.setFilter(w.extent())}e.update()}),I.select("g.brush").empty()||I.select("g.brush").remove(),w.resizeAdaption(function(t){t.append("path").attr("transform","translate(0, "+-(.25*V)+")"),t.select("rect").attr("height",V)}),w.extentAdaption(function(t){t.attr("height",V).classed(n,!0)}),H=I.append("g").attr("class","brush").call(w),H.select("rect.background").attr("height",V),I.selectAll(".group").remove(),I.select(".groups").empty()||I.select(".groups").remove(),Y=I.append("g").attr("class","groups");var r=Y.selectAll(".group").data(a);k.domain(d3.extent(a,function(t){return t[0].i})),r.style("fill",function(t){return k(t[0].i)});var s=r.enter().append("g").attr("class","group");s.append("path").attr("class","area").attr("transform","translate(-0.5,-0.5)").style("fill",function(t){return k(t[0].i)}).on("mouseover",function(t){d3.select(this).style("fill","#67D6E5")}).on("mouseout",function(t){d3.select(this).style("fill",function(t){return k(t[0].i)})}).tooltip(function(t,e){return h[t[0].i]&&"No group"!==h[t[0].i]?{text:h[t[0].i],displacement:[0,20],position:[0,0],gravity:"right",placement:"mouse",mousemove:!0}:{position:[0,0],displacement:[-1e3,0]}}),i.empty()&&(i=I.append("g").attr("class","timeline-tooltip").attr("pointer-events","none").style("display","none"),i.append("foreignObject").attr("width",100).attr("height",26).attr("pointer-events","none").append("html").style("background-color","rgba(0,0,0,0)").append("div").style("padding-left",3).style("padding-right",3).style("text-align","center").style("white-space","nowrap").style("overflow","hidden").style("text-overflow","ellipsis").style("border-radius","5px").style("background-color","white").style("border","3px solid grey"))}function l(t){return et=!1,0===Z.length||(Z.forEach(function(e){e[0]<=y.parse(t)&&e[1]>=y.parse(t)&&(et=!0)}),et)}function s(t){var e=c(T),n=t.select("svg").select("g"),o=d3.max(T.map(function(t){return t.value.data.countByGroup.values().map(function(t){return t.agg}).reduce(function(t,e){return t+e},0)}));o>B.domain()[1]&&B.domain([0,o]),A.scale(B),G(e);var a=Y.selectAll(".group").data(e);"stack"===_?n.select(".y-axis").empty()?n.append("g").attr("class","axis y-axis").attr("transform","translate("+z+", 0)").call(A):n.select(".y-axis").call(A):n.select(".y-axis").empty()||n.select(".y-axis").remove(),a.exit().remove(),a.transition().attr("transform",function(t,e){return"stack"===_?"translate(0, 0)":"translate(0,"+b(h[e])+")"});var i=a.select("path");i.attr("d",function(t){return U(t)})}function c(t){var e=v(d3.min(t,function(t){return v.parse(t.key)})),n=v(d3.max(t,function(t){return v.parse(t.key)})),o=0,a=d3.map(),i=null,r=null,l=v.parse(n);l.setUTCDate(l.getUTCDate()+1),n=v(l);var s=[n];if(h.forEach(function(t){a.set(t,{count:0,agg:0})}),"numeric"===L)for(;s[0]>e;)s.unshift(s[0]-1);else if(8===v.toString().length)for(;v.parse(s[0])>v.parse(e);)r=v.parse(s[0]),r.setUTCDate(r.getUTCDate()-1),s.unshift(v(r));else if(5===v.toString().length)for(l=v.parse(n),l.setUTCMonth(l.getUTCMonth()+1),n=v(l),s=[n];v.parse(s[0])>v.parse(e);)r=v.parse(s[0]),r.setUTCMonth(r.getUTCMonth()-1),s.unshift(v(r));else for(l=v.parse(n),l.setUTCFullYear(l.getUTCFullYear()+1),n=v(l),s=[n];v.parse(s[0])>v.parse(e);)r=v.parse(s[0]),r.setUTCFullYear(r.getUTCFullYear()-1),s.unshift(v(r));return i=s.map(function(e){return t[o]&&t[o].key===e?(o++,{key:e,value:t[o-1].value}):{key:e,value:{count:0,data:{countByGroup:a,agg:0}}}}),h.map(function(t,e){return i.map(function(n){return{x:v.parse(n.key),y:n.value.data.countByGroup.get(t).agg,total:n.value.data.agg,i:e}})})}function u(){"numeric"!==L&&(ot=F.domain()[1].getFullYear()-F.domain()[0].getFullYear(),at=v.toString(),(ot>=30&&"%Y"!==at||1<ot&&ot<30&&"%Y-%m"!==at||ot<=1&&"%Y-%m-%d"!==at)&&m(),rt=y.parse(y(F.domain()[0])),it=y.parse(y(F.domain()[1])),rt.setUTCFullYear(rt.getUTCFullYear()-1),it.setUTCFullYear(it.getUTCFullYear()+1),T=x.all().filter(function(t){return!!(t.key&&v.parse(t.key)&&v.parse(t.key)>=rt&&v.parse(t.key)<=it)})),1===q.scale()&&q.translate([0,0]),S.scale(F),w.x(F),nt=w.extent(),w.clear(),w.extent(nt),P.select("svg").select(".x-axis").call(S),P.select("svg").select(".brush").call(w),P.call(s)}function d(){"stack"===_?(B.range([V,0]),U.y0(function(t){return B(t.valueOffset)}),U.y1(function(t){return B(t.y)-(B.range()[0]-B(t.valueOffset))})):(B.range([b.rangeBand(),0]),U.y0(function(t){return b.rangeBand()}),U.y1(function(t){return B(t.y)}))}function g(){void 0!==o.title||P.select("span.list-title").text(null)}function p(){v=null,y=null,"numeric"!==L?(v=t.format(),y=t.format):(v=function(t){return t},v.parse=function(t){return t},y=v),h=d3.map();var e=o.xfilter.dimension(J),n=e.group();n.all().forEach(function(t){h.has(t.key)||h.set(t.key,0)}),e.remove(),n.remove(),h=h.keys().sort(),x&&x.remove(),x=null,D=0,w=d3.svg.multibrush(),K=O=M=10,N=20,E=30,z=j-2*K-E,V=W-2*O-N,k=d3.scale.linear().interpolate(d3.interpolateLab).range(["#DDDDDD","#444444"]),b=d3.scale.ordinal().rangeRoundBands([0,V],0),F=null,T=null,m(),C=d3.min(T,function(t){return v.parse(t.key)}),$=d3.max(T,function(t){return v.parse(t.key)}),8===v.toString().length?$.setUTCDate($.getUTCDate()+1):5===v.toString().length?$.setUTCMonth($.getUTCMonth()+1):$.setUTCFullYear($.getUTCFullYear()+1),F=C instanceof Date?d3.time.scale().range([0,z]).domain([C,$]):d3.scale.linear().range([0,z]).domain([C,$]),F.clamp(!0),b.domain(h);var i=d3.max(T.map(function(t){return t.value.data.countByGroup.values().map(function(t){return t.agg}).reduce(function(t,e){return t+e},0)}));B=d3.scale.linear().domain([0,i]),G=d3.layout.stack().out(function(t,e){t.valueOffset=e}),S=d3.svg.axis().orient("bottom").scale(F),A=d3.svg.axis().orient("right").scale(B).ticks(10).tickFormat(d3.format("d")),w.x(F),"numeric"===L&&S.tickFormat(d3.format("d")),U=d3.svg.area().x(function(t){return F(t.x)}).interpolate("step-after"),d(),P=d3.select(a[0]),P.attr("height",W),P.attr("width",j),P.select("span.list-title").empty()&&P.append("span").attr("class","list-title")}function m(){function e(t){return t.agg}function n(t,e){return++t.count,++t.agg,t.countByGroup.set(J(e),t.data.countByGroup.get(J(e))+1),t}function a(t,e){return--t.count,--t.agg,t.countByGroup.set(J(e),t.data.countByGroup.get(J(e))-1),t}function i(){var t={count:0,agg:0,data:{countByGroup:d3.map()}};return h.forEach(function(e){t.data.countByGroup.has(e)||t.data.countByGroup.set(e,0)}),t}var r=crossfilterHelpers.countByDimensionWithInitialCountAndData(function(t){return t[Q]+":"+J(t)},function(t,e,n){return void 0===e&&(e={},e.countByGroup=d3.map(),h.forEach(function(t){e.countByGroup.has(t)||e.countByGroup.set(t,{uniques:d3.map(),count:0,agg:0})})),"add"===n?(e.countByGroup.get(J(t)).uniques.has(t[Q])?e.countByGroup.get(J(t)).uniques.set(t[Q],e.countByGroup.get(J(t)).uniques.get(t[Q])+1):(e.countByGroup.get(J(t)).uniques.set(t[Q],1),e.countByGroup.get(J(t)).count++,"COUNT"===o.aggregationType?e.countByGroup.get(J(t)).agg++:o.aggregateKey&&(e.countByGroup.get(J(t)).agg=e.countByGroup.get(J(t)).agg+ +t[o.aggregateKey])),"COUNT"===o.aggregationType?e.agg=e.agg+1:o.aggregateKey&&(e.agg=e.agg+ +t[o.aggregateKey])):(1===e.countByGroup.get(J(t)).uniques.get(t[Q])?(e.countByGroup.get(J(t)).uniques.remove(t[Q]),e.countByGroup.get(J(t)).count--,"COUNT"===o.aggregationType?e.countByGroup.get(J(t)).agg--:o.aggregateKey&&(e.countByGroup.get(J(t)).agg=e.countByGroup.get(J(t)).agg-+t[o.aggregateKey])):e.countByGroup.get(J(t)).uniques.set(t[Q],e.countByGroup.get(J(t)).uniques.get(t[Q])-1),"COUNT"===o.aggregationType?e.agg=e.agg-1:o.aggregateKey&&(e.agg=e.agg-+t[o.aggregateKey])),e}),l=r.add,s=r.remove,c=r.init;if("numeric"!=L){if(F)D=F.domain()[1].getFullYear()-F.domain()[0].getFullYear();else{x=o.localDimension.group();var u=d3.min(x.all().filter(function(t){return t.key&&y.parse(t.key)}),function(t){return y.parse(t.key)}),d=d3.max(x.all().filter(function(t){return t.key&&y.parse(t.key)}),function(t){return y.parse(t.key)});D=d.getFullYear()-u.getFullYear(),x.remove()}D<=1?v=t.format:D>1&&(v=t.formatMonth,D>30&&(v=t.formatYear))}var g;x&&x.remove(),x=o.localDimension.group(function(t){return g=t?y.parse(t):null,null!==g&&void 0!==g?v(g):""}),void 0!==Q?(x.reduce(l,s,c),x.order(e)):(x.reduce(n,a,i),x.order(function(t){return t.data.agg})),T=x.all().filter(function(t){return t.key&&v.parse(t.key)}).sort(function(t,e){return v.parse(t.key)<v.parse(e.key)?-1:1})}function f(){o.localDimension.filterAll(),w.clear(),Z=w.extent(),e.removeFilter(X),e.update(),o.setFilter&&o.setFilter(w.extent())}if(0===o.localDimension.top(1).length)throw"No date/number dimension defined.";var v,y,h,x,D,w,k,b,F,T,C,$,B,G,S,A,U,P,q,M,I,Y,K,O,E,N,V,z,R,H,j=o.width?+o.width:a.width(),W=o.height?+o.height:100,_=o.mode?o.mode:"stack",L=o.type?o.type:"numeric",J=o.groupAccessor?o.groupAccessor:function(t){return"Default group"},Q=""===o.uniqueDimension?void 0:o.uniqueDimension,X=o.title+Math.floor(1e4*Math.random()),Z=[],tt=[];tt.push(e.onUpdate(X,function(){P.call(s)})),o.$on("filterReset",function(){f()}),tt.push(e.onReset(X,f)),o.$on("zoomToFilter",function(){if(w.empty())F.domain([C,$]);else{nt=w.extent();var t=w.extent()[0][0],e=w.extent()[w.extent().length-1][1];F.domain([t,e]),w.clear(),w.extent(nt)}q.x(F),q.event(d3.select(a[0]).select("svg").select("g"))}),o.$watch("mode",function(t,e){t!==e&&(_=o.mode,d(),P.call(s))}),o.$watch("title",function(t,e){t!==e&&(R=o.title,g())}),o.$watch("short",function(t){t?(I.select(".y-axis").style("display","none"),Y.attr("transform","matrix(1, 0, 0, 0.25, 0, 119.5)")):(I.select(".y-axis").style("display","inline"),Y.attr("transform","matrix(1, 0, 0, 1, 0, 0)"))}),o.$watchGroup(["uniqueDimension","aggregationType","aggregationKey"],function(t,e){t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]||(Q=""===o.uniqueDimension?void 0:o.uniqueDimension,nt=w.extent(),w.clear(),p(),w.extent(nt),P.call(r),P.call(s))}),o.$watch("localDimension",function(t,n){t&&(L=o.type?o.type:"numeric",w&&w.extent()[1]-w.extent()[0]!==0&&(n.filterAll(),o.extentOverride.start=null,o.extentOverride.end=null,e.removeFilter(X),e.update(),o.setFilter&&o.setFilter(w.extent())),p(),P.call(r),P.call(s))}),o.$watch("groupAccessor",function(t,e){if(t!==e){var n;J=o.groupAccessor?o.groupAccessor:function(t){return"Default group"},n=w.extent(),w.clear(),p(),w.extent(n),P.call(r),P.call(s)}}),p(),P.call(r),P.call(s);var et,nt=[],ot=null,at=null,it=null,rt=null;o.getFilter=function(t){if(w.clear(),w.extent(t.map(function(t){return[new Date(t[0]),new Date(t[1])]})),Z=w.extent(),H.call(w),P.call(s),w.empty())o.localDimension.filterAll(),e.removeFilter(X),o.setFilter&&o.setFilter(w.extent());else{o.localDimension.filterFunction(l);var n=Z.map(function(t){return"from "+y(new Date(t[0]))+" to "+y(new Date(t[1]))}).join(" and ");tt.push(e.setFilter(X,o.title,n,f)),o.setFilter&&o.setFilter(w.extent())}e.update()},o.$on("$destroy",function(){tt.forEach(function(t){t()})})}};return o}]).directive("palladioTimelineFilterWithSettings",["dateService","palladioService","dataService",function(t,e,n){var o={scope:{timelineHeight:"=",showControls:"=",showAccordion:"=",showSettings:"=",functions:"="},templateUrl:"partials/palladio-timeline-component/template.html",link:{pre:function(o,a,i){o.metadata=n.getDataSync().metadata,o.xfilter=n.getDataSync().xfilter;var r=[];o.uniqueToggleId="timelineFilter"+Math.floor(1e4*Math.random()),o.uniqueToggleHref="#"+o.uniqueToggleId,o.uniqueModalId=o.uniqueToggleId+"modal",o.dateDims=o.metadata.filter(function(t){return"date"===t.type}).sort(function(t,e){return t.description<e.description?-1:1});var l=t.format,s=function(t){return l.reformatExternal(t[o.dateProp.key])};o.dateProp=o.dateDims[0]?o.dateDims[0]:void 0,o.$watch("dateProp.key",function(t,e){t&&(o.dateDim&&o.dateDim.remove(),o.dateDim=o.xfilter.dimension(s),o.title=o.dateDims.filter(function(t){return t.key==o.dateProp.key})[0].description)}),o.groupDims=o.metadata.sort(function(t,e){return t.description<e.description?-1:1}),o.groupProp=o.groupDims[0]?o.metadata.sort(function(t,e){return t.cardinality<e.cardinality?-1:1})[0]:void 0,o.$watch("groupProp",function(){o.groupProp?o.groupAccessor=function(t){return t[o.groupProp.key]+""}:o.groupAccessor=function(t){return"No group"}}),o.getAggDescription=function(t){return"count"===t.type?"Number of "+t.field.countDescription:"Sum of "+t.field.description+" (from "+c.get(t.fileId).countDescription+" table)"};var c=d3.map();o.metadata.filter(function(t){return t.countable===!0}).forEach(function(t){c.set(t.originFileId?t.originFileId:0,t)}),o.aggDims=o.metadata.filter(function(t){return t.countable===!0||"number"===t.type}).map(function(t){return{key:t.key,type:t.countable?"count":"sum",field:t,fileId:t.originFileId?t.originFileId:0}}).filter(function(t){return!!c.get(t.fileId)}).sort(function(t,e){return o.getAggDescription(t)<o.getAggDescription(e)?-1:1}),o.aggDim=o.aggDims.filter(function(t){return 0===t.fileId})[0]?o.aggDims.filter(function(t){return 0===t.fileId})[0]:o.aggDims[0],o.$watch("aggDim",function(){o.aggDim?"count"===o.aggDim.type?(o.countBy=o.aggDim.key,o.aggregationType="COUNT",o.aggregateKey=null):(o.countBy=c.get(o.aggDim.fileId).key,o.aggregationType="SUM",o.aggregateKey=o.aggDim.key):o.countBy=o.countDims.get(0).key}),o.aggregationTypes=["COUNT","SUM"],o.aggregationType="COUNT",o.aggregateKey=null,o.metadata.filter(function(t){return t.countBy===!0})[0]&&(o.countBy=o.metadata.filter(function(t){return t.countBy===!0})[0].key),o.shortVersion=!1,o.$watch("shortVersion",function(t){d3.select(a[0]).select("svg").style("margin-top",function(){return t?"-133px":""})}),o.modes=[{id:"stack",name:"Stack"},{id:"multiple",name:"Multiple"}],o.mode="stack";var u=o.dateDims.filter(function(t){return t.key==o.dateProp.key})[0];o.title=u?u.description:"Timeline",o.dateDim=o.xfilter.dimension(s),o.groupAccessor=function(t){return t[o.groupProp.key]+""},o.extentOverride={start:null,end:null},o.zoomToFilter=function(){o.$broadcast("zoomToFilter")},o.showDateModal=function(){$("#"+o.uniqueModalId).find("#date-modal").modal("show")},o.showGroupModal=function(){$("#"+o.uniqueModalId).find("#group-modal").modal("show")},o.showAggModal=function(){$("#"+o.uniqueModalId).find("#agg-modal").modal("show")},o.filterReset=function(){o.$broadcast("filterReset"),o.$broadcast("zoomToFilter")};var d=!1;o.$on("$destroy",function(){o.$broadcast("filterReset"),o.dateDim.filterAll(),o.extentOverride={start:null,end:null},o.dateDim.remove(),r.forEach(function(t){t()}),d=!0,$("#"+o.uniqueModalId).remove()}),o.$on("updateFilter",function(t,e){o.filter=e,e[1]||(o.filter=null)}),o.$on("expandFilters",function(t){$(a).find(".accordion-toggle").hasClass("collapsed")&&($(a).find(".accordion-toggle").click(),o.collapse=!1)}),o.$on("collapseFilters",function(t){$(a).find(".accordion-toggle").hasClass("collapsed")||($(a).find(".accordion-toggle").click(),o.collapse=!0)});var g=[];o.setFilter=function(t){g=t},o.getFilter=function(t){},o.saveAsSVG=function(){var t=new SvgSaver,e=a.find("svg")[0];console.log(e),t.asSvg(e,"Palladio_timeline_"+o.title+".svg")},o.functions&&(o.functions.date=function(t){o.$apply(function(e){t&&(e.dateProp=e.dateDims.filter(function(e){return e.key===t.key})[0])})},o.functions.aggregation=function(t){o.$apply(function(e){t&&(e.aggDim=e.aggDims.filter(function(e){return e.key===t.key})[0])})},o.functions.group=function(t){o.$apply(function(e){t?e.groupProp=e.groupDims.filter(function(e){return e.key===t.key})[0]:e.groupProp=null})},o.functions.getSettings=function(){return a.find(".timeline-settings")[0]},o.functions.importState=function(t){return p(t),!0},o.functions.exportState=function(){return m()});var p=function(t){o.dateProp=o.dateDims.filter(function(e){return e.key===t.dateProp})[0],o.$digest(),t.countDim&&(o.countDim=o.aggDims.filter(function(e){return e.key===t.countDim})[0]),t.aggDimKey&&(o.aggDim=o.aggDims.filter(function(e){return e.key===t.aggDimKey})[0]),o.$digest(),o.groupProp=t.groupProp?o.groupDims.filter(function(e){return e.key===t.groupProp})[0]:null,o.$digest(),o.shortVersion=t.shortVersion,o.shortVersion=!1,o.$digest(),t.extent&&(o.getFilter(t.extent),o.$digest())},m=function(){return!d&&{countDim:o.aggDim.key,dateProp:o.dateProp.key,groupProp:o.groupProp?o.groupProp.key:null,shortVersion:o.shortVersion,extent:g,aggDimKey:o.aggDim.key}};r.push(e.registerStateFunctions(o.uniqueToggleId,"timeline",m,p)),a.find(".main-viz").addClass(o.showSettings?"col-lg-9":"col-lg-12"),a.find(".main-viz").addClass(o.showSettings?"col-md-8":"col-md-12")},post:function(t,e,n){$(e).find(".toggle").on("click",function(){$(e).find(".settings-panel").toggle(0,function(){$(e).find(".view").toggleClass("span12"),$(e).find(".view").toggleClass("span9")})}),$(e[0]).find("#date-modal").parent().appendTo("body")}}};return o}]),angular.module("palladio").run(["$templateCache",function(t){t.put("partials/palladio-timeline-component/template.html",'<!--<div class="row">\n\n\t<div class="col-lg-9 col-md-9 col-sm-11 col-xs-11 margin-bottom">\n\t\t<input type="text" class="form-control" data-ng-model="title" placeholder="Untitled"></input>\n\t</div>\n\n\t<div class="col-lg-3 col-md-3 col-sm-1 col-xs-1 margin-bottom">\n\n\t\t<a data-ng-show="showControls === \'true\'"\n\t\t\tclass="btn btn-default"\n\t\t\tdata-ng-click="filterReset()"\n\t\t\ttooltip-animation="false"\n\t\t\ttooltip-append-to-body="true"\n\t\t\ttooltip="Clear">Clear</a>\n\n\n\t\t<a data-ng-show="showControls === \'true\'"\n\t\t\t class="text-danger fa fa-trash-o pull-right margin-top"\n\t\t\t data-ng-click="$parent.removeFilter($event)"\n\t\t\t tooltip-animation="false"\n\t\t\t tooltip-append-to-body="true"\n\t\t\t tooltip="Delete"></a>\n\n\t\t<span class="clearfix"></span>\n\n\t</div>\n</div>-->\n\n<div class="row" ng-show="collapse" ng-init="collapse=false">\n\t<div class="col-lg-12">\n\t\t{{title}}<span class="text-muted margin-left small">Timeline</span>\n\t\t<a class="btn btn-default btn-xs pull-right"\n\t\t\ttooltip-animation="false"\n\t\t\ttooltip-append-to-body="true"\n\t\t\ttooltip-placement="left"\n\t\t\ttooltip="Expand"\n\t\t\tng-click="collapse=false">\n\t\t\t<i class="fa fa-chevron-up"></i>\n\t\t</a>\n\t</div>\n</div>\n\n<div class="row" ng-show="!collapse">\n\n\t<div class="main-viz">\n\n\t\t<div data-palladio-timeline-filter\n\t\t\tdata-dimension="dateDim"\n\t\t\tdata-group-accessor="groupAccessor"\n\t\t\tdata-xfilter="xfilter"\n\t\t\tdata-type="date"\n\t\t\tdata-short="shortVersion"\n\t\t\tdata-title="{{title}}"\n\t\t\tdata-height="{{timelineHeight}}"\n\t\t\tdata-mode="{{mode}}"\n\t\t\tdata-count-by="{{countBy}} "\n\t\t\tdata-aggregation-type="{{aggregationType}}"\n\t\t\tdata-aggregate-key="{{aggregateKey}}"\n\t\t\tdata-set-filter="setFilter"\n\t\t\tdata-get-filter="getFilter"\n\t\t\tdata-extent-override="extentOverride" >\n\t\t</div>\n\n\t\t<div class="well well-expand" ng-show="!dateProp">Select a Date dimension on the right</div>\n\n\t</div>\n\n\t<div class="col-lg-3 timeline-settings" data-ng-show="showSettings">\n\n\t\t<div class="row">\n\t\t\t<div class="col-lg-4 col-md-4 col-sm-4 col-xs-4 text-right ">\n\t\t\t\t<label class="inline text-muted">Timeline</label>\n\t\t\t</div>\n\t\t\t<div class="col-lg-8 col-md-8 col-md-8 col-xs-8 col-condensed">\n\t\t\t\t<a class="btn btn-default btn-xs pull-right"\n\t\t\t\t\ttooltip-animation="false"\n\t\t\t\t\ttooltip-append-to-body="true"\n\t\t\t\t\ttooltip-placement="left"\n\t\t\t\t\ttooltip="Collapse"\n\t\t\t\t\tng-click="collapse=true">\n\t\t\t\t\t<i class="fa fa-chevron-down"></i>\n\t\t\t\t</a>\n\t\t\t</div>\n\t\t</div>\n\n\t\t<div class="row margin-top">\n\t\t\t<div class="col-lg-4 col-md-4 col-sm-4 col-xs-4 text-right ">\n\t\t\t\t<label class="inline">Description</label>\n\t\t\t</div>\n\t\t\t<div class="col-lg-8 col-md-8 col-md-8 col-xs-8 col-condensed">\n\t\t\t\t<input type="text" class="form-control" data-ng-model="title" placeholder="Untitled"></input>\n\t\t\t</div>\n\t\t</div>\n\n\t\t<div class="row margin-top">\n\t\t\t<div class="col-lg-4 col-md-4 col-sm-4 col-xs-4 text-right ">\n\t\t\t\t<label class="inline">Dates</label>\n\t\t\t</div>\n\t\t\t<div class="col-lg-8 col-md-8 col-md-8 col-xs-8 col-condensed">\n\t\t\t\t<span class="btn btn-default btn-modal" ng-click="showDateModal()">\n\t\t\t\t\t{{dateProp.description || "Choose"}}\n\t\t\t\t\t<span class="caret"></span>\n\t\t\t\t</span>\n\t\t\t</div>\n\t\t</div>\n\n\t\t<div class="row margin-top">\n\t\t\t<div class="col-lg-4 col-md-4 col-sm-4 col-xs-4 text-right ">\n\t\t\t\t<label class="inline">Height</label>\n\t\t\t</div>\n\t\t\t<div class="col-lg-8 col-md-8 col-md-8 col-xs-8 col-condensed">\n\t\t\t\t<span class="btn btn-default btn-modal" ng-click="showAggModal()">\n\t\t\t\t\t{{getAggDescription(aggDim) || "Choose"}}\n\t\t\t\t\t<span class="caret"></span>\n\t\t\t\t</span>\n\t\t\t</div>\n\t\t</div>\n\n\t\t<div class="row margin-top">\n\t\t\t<div class="col-lg-4 col-md-4 col-sm-4 col-xs-4 text-right ">\n\t\t\t\t<label class="inline">Group by</label>\n\t\t\t</div>\n\t\t\t<div class="col-lg-8 col-md-8 col-md-8 col-xs-8 col-condensed">\n\t\t\t\t<span class="btn btn-default btn-modal" ng-click="showGroupModal()">\n\t\t\t\t\t{{groupProp.description || "Choose"}}\n\t\t\t\t\t<span class="caret"></span>\n\t\t\t\t</span>\n        <span data-ng-show="groupProp">\n          <i class="fa fa-close" data-ng-click="groupProp = null"></i>\n        </span>\n\t\t\t</div>\n\t\t</div>\n\n\t\t<div class="row margin-top" data-ng-show="showControls">\n\t\t\t<div class="col-lg-4 col-md-4 col-sm-4 col-xs-4 text-right ">\n\t\t\t</div>\n\t\t\t<div class="col-lg-8 col-md-8 col-md-8 col-xs-8 col-condensed">\n\n\t\t\t\t<a class="small" data-ng-click="filterReset()">Clear</a>\n        <a class="small" data-ng-click="saveAsSVG()"\n          tooltip-animation="false"\n\t\t\t\t \ttooltip-append-to-body="true"\n\t\t\t\t\ttooltip-placement="top"\n\t\t\t\t\ttooltip="Download as SVG">\n          \n          <i class="fa fa-download"></i>\n        </a>\n\n\t\t\t\t<a class="text-danger pull-right"\n\t\t\t\t \ttooltip-animation="false"\n\t\t\t\t \ttooltip-append-to-body="true"\n\t\t\t\t\ttooltip-placement="left"\n\t\t\t\t\ttooltip="Delete filter"\n\t\t\t\t \tdata-ng-click="$parent.removeFilter($event)">\n\t\t\t\t\t<i class="fa fa-trash-o"></i>\n\t\t\t\t</a>\n\t\t\t</div>\n\t\t</div>\n\n\n\n\t</div>\n\n</div>\n\n<div id="{{uniqueModalId}}">\n\t<div id="date-modal" data-modal dimensions="dateDims" model="dateProp"></div>\n\t<div id="group-modal" data-modal dimensions="groupDims" model="groupProp"></div>\n\t<div id="agg-modal" data-modal dimensions="aggDims" model="aggDim"\n\t\tdescription-accessor="getAggDescription"></div>\n</div>')}]);